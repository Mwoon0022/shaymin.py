from urllib.request import Request, urlopen
import json



class pokemon:

  def __init__(self, pokemon, gen):

    if isinstance(pokemon, list):
      pokemon = str(' '.join(pokemon))
    
    if int(gen) not in range(9):
      raise ValueError("incorrect gen")

    pokemon = pokemon.strip().lower()
    
    if ' ' in pokemon:
      pokeNames = pokemon.split(' ')
      pokeNames = [name.capitalize() for name in pokeNames]
      pokemon = ' '.join(pokeNames)
      
    elif '-' in pokemon:
      pokeNames = pokemon.split('-')
      pokeNames = [name.capitalize() for name in pokeNames]
      pokemon = '-'.join(pokeNames)

    else:
      pokemon = str(pokemon.capitalize())

    print(f"[~]  pokemon --> {pokemon}")

    self.pokemon = pokemon
    self.gen = gen.strip()
  
  def formats(self):

    req = Request(f'https://pkmn.github.io/smogon/data/sets/gen{self.gen}.json', headers={'User-Agent': 'Mozilla/5.0'})
    with urlopen(req) as url:
      sets = json.loads(url.read().decode())
    sets = sets[self.pokemon] 
    formats = sets.keys()
    
    return formats

  def sets(self):

    req = Request(f'https://pkmn.github.io/smogon/data/sets/gen{self.gen}.json', headers={'User-Agent': 'Mozilla/5.0'})
    with urlopen(req) as url: 
      sets = json.loads(url.read().decode()) 
    sets = sets[self.pokemon] 
    
    return sets
  
  def data(self):
    
    req = Request('http://play.pokemonshowdown.com/data/pokedex.json', headers={'User-Agent': 'Mozilla/5.0'})
    with urlopen(req) as url:
      data = json.loads(url.read().decode())
    data = data[self.pokemon.lower().replace(' ','').replace('-','')]

    return data

  def stats(self, format):

    req = Request(f'https://pkmn.github.io/smogon/data/stats/gen{self.gen}{format}.json', headers={'User-Agent': 'Mozilla/5.0'})
    with urlopen(req) as url:
      stats_ = json.loads(url.read().decode())
    stats_ = stats_["pokemon"][self.pokemon]

    return stats_

def percentage(n):
  n = n*100
  if float(n) > 1.0:
    n = round(n,0)
  else:
    n = round(n,2)
  return n

def dictify(dict1):

    ee = []

    for x in dict1.keys():

        for y in dict1[x].keys():

            ee.append(f"{x} {y}")

    return ee

def iev(ievs, ie):
    if len(ievs) != 0:
        ievss = []
        try:
            if type(ievs) == type('e'):
                ievss = f'` \n{ie.capitalize()}Vs     `  {ievs}'
            else:
                for x in ievs:
                    ievss.append(f"{str(ievs[x])} {x.capitalize()}")
                ievss = ' / '.join(ievss)
                ievss = f'` {ie.capitalize()}Vs     `  {ievss}'
        except AttributeError:
            ievss = ievs

    else:
        ievss = ''
    return ievss

def stats(stat):
  stat = str(stat*5)
  stat = stat[:-2]
  try:
    return '▂'*int(stat)
  except ValueError:
    return '▁'


  """if stat < 6:
    return "<:red_1:873248935433629697>"
  elif stat < 11:
    return "<:red_2:873248934020120647> "
  elif stat < 16:
    return "<:red_3:873248933336469534><:red_6:873250046316007444>"
  elif stat < 21:
    return "<:red_3:873248933336469534><:red_5:873248934691233803>"
  elif stat < 26:
    return "<:red_3:873248933336469534><:red_4:873248935240687667><:red_6:873250046316007444>"
  elif stat < 31:
    return "<:red_3:873248933336469534><:red_4:873248935240687667><:red_5:873248934691233803>"
  elif stat < 36:
    return "<:red_3:873248933336469534><:red_4:873248935240687667><:red_4:873248935240687667><:red_6:873250046316007444>"
  elif stat < 41:
    return "<:red_3:873248933336469534><:red_4:873248935240687667><:red_4:873248935240687667><:red_5:873248934691233803> "
  elif stat < 46:
    return "<:red_3:873248933336469534><:red_4:873248935240687667><:red_4:873248935240687667><:red_4:873248935240687667><:red_6:873250046316007444>"
  elif stat < 51:
    return "<:red_3:873248933336469534><:red_4:873248935240687667><:red_4:873248935240687667><:red_4:873248935240687667><:red_5:873248934691233803>"
  elif stat < 56:
    return "<:yellow_1:873248933290324079><:yellow_2:873248934888341504><:yellow_2:873248934888341504><:yellow_2:873248934888341504><:yellow_2:873248934888341504><:yellow_4:873248934582185994> "
  elif stat < 61:
    return "<:yellow_1:873248933290324079><:yellow_2:873248934888341504><:yellow_2:873248934888341504><:yellow_2:873248934888341504><:yellow_2:873248934888341504><:yellow_3:873248935081295873> "
  elif stat < 66:
    return "<:yellow_1:873248933290324079><:yellow_2:873248934888341504><:yellow_2:873248934888341504><:yellow_2:873248934888341504><:yellow_2:873248934888341504><:yellow_2:873248934888341504><:yellow_4:873248934582185994> "
  elif stat < 71:
    return "<:yellow_1:873248933290324079><:yellow_2:873248934888341504><:yellow_2:873248934888341504><:yellow_2:873248934888341504><:yellow_2:873248934888341504><:yellow_2:873248934888341504><:yellow_3:873248935081295873> "
  elif stat < 76:
    return "<:yellow_1:873248933290324079><:yellow_2:873248934888341504><:yellow_2:873248934888341504><:yellow_2:873248934888341504><:yellow_2:873248934888341504><:yellow_2:873248934888341504><:yellow_2:873248934888341504><:yellow_4:873248934582185994> "
  elif stat < 81:
    return "<:yellow_1:873248933290324079><:yellow_2:873248934888341504><:yellow_2:873248934888341504><:yellow_2:873248934888341504><:yellow_2:873248934888341504><:yellow_2:873248934888341504><:yellow_2:873248934888341504><:yellow_3:873248935081295873> "
  elif stat < 86:
    return "<:yellow_1:873248933290324079><:yellow_2:873248934888341504><:yellow_2:873248934888341504><:yellow_2:873248934888341504><:yellow_2:873248934888341504><:yellow_2:873248934888341504><:yellow_2:873248934888341504><:yellow_2:873248934888341504><:yellow_4:873248934582185994> "
  elif stat < 91:
    return "<:yellow_1:873248933290324079><:yellow_2:873248934888341504><:yellow_2:873248934888341504><:yellow_2:873248934888341504><:yellow_2:873248934888341504><:yellow_2:873248934888341504><:yellow_2:873248934888341504><:yellow_2:873248934888341504><:yellow_3:873248935081295873> "
  elif stat < 96:
    return "<:green_1:873248933273559060><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_4:873248932774420541> "
  elif stat < 101:
    return "<:green_1:873248933273559060><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_3:873248934900932688> "
  elif stat < 106:
    return "<:green_1:873248933273559060><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_4:873248932774420541> "
  elif stat < 111:
    return "<:green_1:873248933273559060><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_3:873248934900932688> "
  elif stat < 116:
    return "<:green_1:873248933273559060><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_4:873248932774420541> "
  elif stat < 121:
    return "<:green_1:873248933273559060><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_3:873248934900932688> "
  elif stat < 126:
    return "<:green_1:873248933273559060><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_4:873248932774420541> "
  elif stat < 131:
    return "<:green_1:873248933273559060><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_3:873248934900932688> "
  elif stat < 146:
    return "<:green_1:873248933273559060><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_4:873248932774420541>  "
  elif stat < 151:
    return "<:green_1:873248933273559060><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_3:873248934900932688> "
  elif stat < 156:
    return "<:green_1:873248933273559060><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_2:873248934598959124><:green_4:873248932774420541> "
  elif stat < 161:
    return "<:blue_1:873248933479084102><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_3:873248933567168612>  "

  #       chompy stuff (blue)        #

  elif stat < 166:
    return "<:blue_1:873248933479084102><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_3:873248933567168612> "

  elif stat < 171:
    return "<:blue_1:873248933479084102><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_3:873248933567168612> "
  elif stat < 181:
    return "<:blue_1:873248933479084102><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_3:873248933567168612> "
  elif stat < 191:
    return "<:blue_1:873248933479084102><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_3:873248933567168612> "
  elif stat < 201:
    return "<:blue_1:873248933479084102><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_3:873248933567168612> "
  elif stat < 211:
    return "<:blue_1:873248933479084102><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_3:873248933567168612> "
  elif stat < 221:
    return "<:blue_1:873248933479084102><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_3:873248933567168612> "
  elif stat < 231:
    return "<:blue_1:873248933479084102><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_3:873248933567168612> "
  elif stat < 241:
    return "<:blue_1:873248933479084102><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_3:873248933567168612> "
  elif stat < 251:
    return "<:blue_1:873248933479084102><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_2:873248934498279454><:blue_3:873248933567168612> " """